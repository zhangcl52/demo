package com.hunter.sys.service;import com.hunter.common.constant.BaseConstant;import com.hunter.sys.dao.SysRandomNumberDao;import com.hunter.sys.entity.SysRandomNumber;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.stereotype.Service;import java.util.Random;/** * @Author zhangcl * @Date 17/3/8  下午11:42 */@Servicepublic class SysRandomCodeService {    @Autowired    SysRandomNumberDao randomNumberDao;    /**     * 获取库中的一个有效的随机数     *     * @return     */    public long getRandomNumber() {        long validNumberCount = randomNumberDao.countBySql("countValidNumber", null);        Random random=new Random(validNumberCount);        long index = random.nextLong();        SysRandomNumber validSysRandomNumber= randomNumberDao.findOneById(index);        SysRandomNumber inValidSysRandomNumber= randomNumberDao.findOneById(validNumberCount);        int temp=validSysRandomNumber.getNumber();        validSysRandomNumber.setNumber(inValidSysRandomNumber.getNumber());        inValidSysRandomNumber.setNumber(temp);        inValidSysRandomNumber.setNumberIsUsed(BaseConstant.INT_1);        return temp;    }}