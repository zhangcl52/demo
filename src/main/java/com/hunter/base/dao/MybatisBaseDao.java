package com.hunter.base.dao;import com.hunter.common.constant.SymbolConstant;import org.mybatis.spring.SqlSessionTemplate;import java.util.List;import java.util.Map;/** * @Author zhangcl * @Date 16/7/4  下午10:51 */public class MybatisBaseDao<T> implements IBaseDao<T> {    private String nameSpace;    /**     * 暂不支持一主多从     */    private SqlSessionTemplate masterSqlSessionTemplate;    private SqlSessionTemplate slaveSqlSessionTemplate;    private static String FIND_ONE_BY_ID = "findOneById";    private static String FIND_LIST_BY_IDS = "findListByIds";    public MybatisBaseDao() {    }    public void setNameSpace(String nameSpace) {        this.nameSpace = nameSpace;    }    public void setMasterSqlSessionTemplate(SqlSessionTemplate masterSqlSessionTemplate) {        this.masterSqlSessionTemplate = masterSqlSessionTemplate;    }    public void setSlaveSqlSessionTemplate(SqlSessionTemplate slaveSqlSessionTemplate) {        this.slaveSqlSessionTemplate = slaveSqlSessionTemplate;    }    //    private SqlSessionTemplate chooseDataSource() {//        if (TransactionContext.isInTransaction()) {//            return this.masterSqlSessionTemplate;//        }//        return this.slaveSqlSessionTemplate;//    }    @Override    public long countBySql(String sql, Map param) {        return slaveSqlSessionTemplate.selectOne(getStatement(sql), param);    }    @Override    public T findOneById(long id) {        List<T> list = slaveSqlSessionTemplate.selectList(getStatement(FIND_ONE_BY_ID), id);        if (list != null && list.size() == 1) {            return list.get(0);        }        return null;    }    @Override    public T findOneBySql(String sql, Map param) {        List<T> list = slaveSqlSessionTemplate.selectList(getStatement(sql), param);        if (list != null && list.size() == 1) {            return list.get(0);        }        return null;    }    @Override    public List<T> findListByIds(List<Long> ids) {//        List<T> list = slaveSqlSessionTemplate.selectList(GET_LIST_BY_IDS,);//        if (list != null && list.size() == 1) {//            return list.get(0);//        }        return null;    }    @Override    public List findListBySql(String sql, Map param) {        List list = slaveSqlSessionTemplate.selectList(getStatement(sql), param);        if (list != null && list.size() > 0) {            return list;        }        return null;    }    @Override    public List findListBySql(String sql) {        List list = slaveSqlSessionTemplate.selectList(getStatement(sql));        if (list != null && list.size() > 0) {            return list;        }        return null;    }    @Override    public int insert(Object entity) {        return 0;    }    @Override    public int updateBySql(String sql, Map param) {        return 0;    }    @Override    public int deleteById(long id) {        return 0;    }    @Override    public int deleteByIds(List ids) {        return 0;    }    @Override    public int deleteBySql(String sql, Map param) {        return 0;    }    /**     * 获得sqlid     *     * @param sqlId     * @return     */    private String getStatement(String sqlId) {        return nameSpace + SymbolConstant.PERIOD + sqlId;    }}