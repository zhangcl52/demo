<%@ page contentType="text/html;charset=UTF-8" language="java" %><html><head>    <%@ include file="../common/common.jsp" %></head><p style="font-size-adjust: inherit">用户管理</p><form class="form-horizontal" id="formId" role="form" action="${path}/sys/user/list.do" method="post">    <div class="container-fluid">        <div class="row">            <div class="col-md-1" style="text-align:right">                <label class="control-label" style="font-size: larger">姓名:</label>            </div>            <div class="col-md-2" style="text-align:left">                <input style="width:100%" name="name" id="name" value="${name}" type="text" class="form-control"                       placeholder="请输入姓名"/>            </div>            <div class="col-md-1" style="text-align:right">                <label class="control-label" style="font-size: larger">编码:</label>            </div>            <div class="col-md-2" style="text-align:left">                <input style="width:100%" name="code" id ="code" value="${code}" type="text" class="form-control"                       placeholder="请输入编码"/>            </div>            <div class="col-md-1" style="text-align:right">                <label class="control-label" style="font-size: larger">电话:</label>            </div>            <div class="col-md-2" style="text-align:left">                <input style="width:100%" name="phone" id="phone" value="${phone}" type="text" class="form-control"                       placeholder="请输入电话"/>            </div>            <div class="col-md-1" style="text-align:right">                <label class="control-label" style="font-size: larger">邮箱:</label>            </div>            <div class="col-md-2" style="text-align:left">                <input style="width:100%" name="email" id ="email" value="${email}" type="text" class="form-control"                       placeholder="请输入邮箱"/>            </div>        </div>        <br/>        <div class="row">            <div class="col-md-2" style="text-align:right">                <button type="button" class="btn btn-primary btn-sm" onclick="query()">查询</button>                &nbsp                <button type="button" class="btn btn-success btn-sm" onclick="resetCon()">重置</button>                &nbsp                <button type="button" class="btn btn-info btn-sm" onclick="add()">新增</button>            </div>        </div>    </div>    </div></form><table id="tableId" class="table table-hover compact display order-column" width="100%">    <thead>    <tr>        <td>序号</td>        <td>姓名</td>        <td>编码</td>        <td>性别</td>        <td>email</td>        <td>电话</td>        <td>创建时间</td>        <td>创建人</td>        <td>操作</td>    </tr>    </thead></table><script type="text/javascript">    $(document).ready(function () {        initDataTable();    });    //初使化数据    function initDataTable() {        var myTable = $('#tableId').DataTable({            searching: false,//搜索功能,默认开启true            processing: true,            serverSide: true,            select: false,            lengthChange: true,//是否允许用户改变表格每页显示的记录数            aLengthMenu: [10, 20],            info: true,            ordering:false,            scrollx: true,//水平增加滚动轴            stateSave: false,//刷新时是否保存状态            autoWidth: true,//自动计算宽度            PaginationType: "full_numbers", //除首页、上一页、下一页、末页四个按钮还有页数按钮//            autoFill:true,//            deferRender:true, 当处理大数据时，延迟渲染数据，有效提高Datatables处理能力            ajax: {                url: "${path}/sys/user/ajax/list.do",                type: "post",//                dataFilter:function (data) {////                    var json=jQuery.parseJSON(data);////                    var listDate=json.data;////                    for(var i=0;i<listDate.length;i++){////                        alert(listDate[i].name);////                    }////                    return JSON.stringify(json);//                    for (var i in data){//                        alert(typeof(data[i]));//                    }//                    return data;//                }                data: {                    data: {                        name: "${name}",                        code: "${code}",                        email: "${email}",                        phone: "${phone}"                    }                }            },            columns: [                {"data": null},                {"data": "name"},                {"data": "code"},                {"data": "sex"},                {"data": "email"},                {"data": "phone"},                {"data": "createTime"},                {"data": "createName"},                {"data": null}            ],            columnDefs: [                {                    targets: 0,                    render: function (data, type, row, index) {                        //alert出数组中的值(data和row都是后台返回的json串的值,type每列的类型,index中有第几行)                        //type:"code:822234; createName:zhangcl;                        // createTime:1492273871000; email:zhangsi@1;                        // id:13; isDel:0; modifyName:zhangcl; modifyTime:1492328794000;                        // name:zhangsi; password:273a73beb53cf4817d8f02635884401c;                        // phone:13333333233; sex:F"//                        var temp="";//                        for (var i in row) {//                            temp = temp + "; " + i + ":" + row[i];//                        }//                        alert(temp);                        var rowNum = index['row'] + 1;                        var rowIndex = '<span>&nbsp;&nbsp;&nbsp;' + rowNum + '</span>';                        return rowIndex;                    }                },                {                    targets: 3,                    render: function (data) {                        if (data == 'F') {                            return '女';                        } else if (data == 'M') {                            return '男';                        } else {                            return '其他';                        }                    }                },                {                    targets: 4,                    render: function (data) {                        if (data == null) {                            return "";                        }                        return data;                    }                },                {                    targets: 6,                    render: function (data) {                        return DateFormat.format(new Date(data), 'yyyy-MM-dd hh:mm:ss');                    }                },                {                    targets: 8,                    render: function (data) {                        var html = '<button type="button" class="btn btn-primary btn-sm" style="text-shadow: ' +                                'black 5px 3px 3px" onclick="modify(' + data["id"] + ')">' +                                ' <span class="glyphicon glyphicon-edit" ' +                                'style="color: rgb(255, 140, 60); font-size: 14px;">' +                                '</span> </button>';                        html = html + '&nbsp;<button type="button" class="btn btn-primary btn-sm" style="text-shadow: ' +                                'black 5px 3px 3px" onclick="remove(' + data["id"] + ')">' +                                ' <span class="glyphicon glyphicon-remove" ' +                                'style="color: rgb(255, 140, 60); font-size: 14px;">' +                                '</span> </button>';                        return html;                    }                }            ]        });    }    function add() {        window.location.href = "${path}/sys/user/add.do";    }    function remove(userId) {        window.location.href = "${path}/sys/user/delete.do?id=" + userId;    }    function modify(userId) {        window.location.href = "${path}/sys/user/add.do?id=" + userId;    }    function query() {        $('#formId').submit();    }    function resetCon() {        $('#email').val("");        $('#name').val("");        $('#phone').val("");        $('#code').val("");    }</script></html>