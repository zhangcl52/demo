<%@ page contentType="text/html;charset=UTF-8" language="java" %><html><head>    <%@ include file="../common/common.jsp" %></head><p style="font-size-adjust: inherit">角色管理</p><form class="form-horizontal" id="formId" role="form">    <div class="row1">        <div class="col-md-4" style="text-align:left">            <button type="button" class="btn btn-info btn-sm" onclick="add()">增加角色</button>        </div>    </div></form><br/><br/><%--<table id="tableId" class="table table-hover compact display order-column" width="100%">--%><%--</table>--%><table id="tableId" class="display" cellspacing="0" width="100%">    <thead>    <tr>        <td width="3%">        </td>        <td width="10%">名称        </td>        <td width="15%">url        </td>        <td width="5%">序列        </td>        <td width="8%">子菜单个数        </th>        <td width="15%">创建时间        </td>        <td width="10%">创建人        </td>        <td width="10%">操作        </td>    </tr>    </thead></table><script type="text/javascript">    $(document).ready(function () {        var table = $('#tableId').DataTable({            processing: true,            serverSide: false,            ordering: false,            stateSave: false,//刷新时是否保存状态            lengthChange: true,//是否允许用户改变表格每页显示的记录数            aLengthMenu: [10, 20],            ajax: {                url: "${path}/sys/menu/ajax/list.do",                type: "post"            },            columns: [                {                    "className": 'details-control',                    "orderable": false,                    "data": null,                    "defaultContent": ''                },                {"data": "name"},                {"data": "url"},                {"data": "menuOrder"},                {"data": null},                {"data": "createTime"},                {"data": "createName"},                {"data": null}            ],            columnDefs: [                {                    targets: 2,                    render: function (data) {                        if (data == null) {                            return "";                        }                        return data;                    }                },                {                    targets: 4,                    render: function (data) {                        var childMenu = data.childMenu.length;                        return childMenu;                    }                },                {                    targets: 5,                    render: function (data) {                        return DateFormat.format(new Date(data), 'yyyy-MM-dd hh:mm:ss');                    }                },                {                    targets: 6,                    render: function (data) {                        if (data == null) {                            return "";                        }                        return data;                    }                },                {                    targets: 7,                    orderable: false,                    render: function (data) {                        var html = '&nbsp;<button type="button" class="btn btn-primary btn-sm" style="text-shadow: ' +                                'black 5px 3px 3px" onclick="modify(' + data["id"] + ',-1)">' +                                ' <span class="glyphicon glyphicon-plus" ' +                                'style="color: rgb(255, 140, 60); font-size: 14px;">' +                                '</span> </button>';                        html = html + '&nbsp;<button type="button" class="btn btn-primary btn-sm" style="text-shadow: ' +                                'black 5px 3px 3px" onclick="modify(' + data["id"] + ')">' +                                ' <span class="glyphicon glyphicon-edit" ' +                                'style="color: rgb(255, 140, 60); font-size: 14px;">' +                                '</span> </button>';                        html = html + '&nbsp;<button type="button" class="btn btn-primary btn-sm" style="text-shadow: ' +                                'black 5px 3px 3px" onclick="remove(' + data["id"] + ')">' +                                ' <span class="glyphicon glyphicon-remove" ' +                                'style="color: rgb(255, 140, 60); font-size: 14px;">' +                                '</span> </button>';                        return html;                    }                }            ]        });        // Add event listener for opening and closing details        $('#tableId tbody').on('click', 'td.details-control', function () {            var tr = $(this).closest('tr');            var row = table.row(tr);            if (row.child.isShown()) {                // This row is already open - close it                row.child.hide();                tr.removeClass('shown');            }            else {                // Open this row                row.child(format(row.data())).show();                tr.addClass('shown');            }        });    });    function format(d) {        var childMenu = d.childMenu;        var autoTable = '<table id="tableId" class="display" cellspacing="0" width="100%">';        for (var i = 0; i < childMenu.length; i++) {            var menu = childMenu[i];            var html = '&nbsp;<button type="button" class="btn btn-primary btn-sm" style="text-shadow: ' +                    'black 5px 3px 3px" onclick="modify(' + menu.id + ',-1)">' +                    ' <span class="glyphicon glyphicon-edit" ' +                    'style="color: rgb(255, 140, 60); font-size: 14px;">' +                    '</span> </button>';            html = html + '&nbsp;<button type="button" class="btn btn-primary btn-sm" style="text-shadow: ' +                    'black 5px 3px 3px" onclick="remove(' + menu.id + ')">' +                    ' <span class="glyphicon glyphicon-remove" ' +                    'style="color: rgb(255, 140, 60); font-size: 14px;">' +                    '</span> </button>';            var createTime = DateFormat.format(new Date(menu.createTime), 'yyyy-MM-dd hh:mm:ss');            var autoTr = '<tr class="odd shown" role="row">' +                            '<td width="3%"></td>' +                            '<td width="8%">' + menu.name + '</td>' +                            '<td width="16%">' + menu.url + '</td>' +                            '<td width="6%">' + menu.menuOrder + '</td>' +                            '<td width="7%">' + menu.childMenu.length + '</td>' +                            '<td width="13%">' + createTime + '</td>' +                            '<td width="11%">' + menu.createName + '</td>' +                            '<td width="8%">' + html + '</td>' +                            '</tr>'                    ;            autoTable = autoTable + autoTr;        }        autoTable = autoTable + '</table>';        return autoTable;    }    function add() {        window.location.href = "${path}/sys/menu/add.do";    }    function remove(id) {        window.location.href = "${path}/sys/menu/delete.do?id=" + id;    }    function modify(id, flag) {        window.location.href = "${path}/sys/menu/add.do?flag=" + flag + "&id=" + id;    }</script></html>